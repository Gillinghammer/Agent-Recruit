extends layout

block content
  .row
    .col-lg-12
      #intro.jumbotron
        h1 For Ana's eyes only!
        p You're being recruited by an elite special forces for a mission of critical importance. Your reputation of intelligent seductress who can think quickly on her feet make you the number one candidate. All we ask is that you confirm your identity by completing the following challenges.
        p Once you begin, you'll have 12 hours to complete before this site self-destructs.
        a#authenticate.btn.btn-primary.btn-lg Begin Authentication
  .row
    .col-lg-12
      #dashboard.hidden
        .progress.progress-striped
          .progress-bar.progress-bar-danger(style="width: #{ complete }%" )
        h3#timer= start
        table.table.table-striped.table-hover
          thead
            tr
              th #
              th Objectives
              th Status
              th
          tbody
            tr(class=" #{ data[0].pass ? 'info' : '' } ")
              td 1
              td <a href="/puzzles/1">Authenticate</a>
              td #{ data[0].pass ? 'Complete' : 'Incomplete' }
              if data[0].pass
                td
              else
                td <a href="/puzzles/1">Click to start</a>
            tr(class=" #{ data[1].pass ? 'info' : '' } ")
              td 2
              td <a href="/puzzles/2">Encryption</a>
              td #{ data[1].pass ? 'Complete' : 'Incomplete' }
              if data[1].pass
                td
              else
                td <a href="/puzzles/2">Click to start</a>
            tr(class=" #{ data[2].pass ? 'info' : '' } ")
              td 3
              td <a href="/puzzles/3">Geo-Location</a>
              td #{ data[2].pass ? 'Complete' : 'Incomplete' }
              if data[2].pass
                td
              else
                td <a href="/puzzles/3">Click to start</a>
            tr(class=" #{ data[3].pass ? 'info' : '' } ")
              td 4
              td <a href="/puzzles/4">Culture</a>
              td #{ data[3].pass ? 'Complete' : 'Incomplete' }
              if data[3].pass
                td
              else
                td <a href="/puzzles/4">Click to start</a>
  script.
    $(document).ready(function(){

      $.get('/game', function(data) {
        console.log(data.start)
        var startTime = new Date(data.start)
        var deadline= new Date ( startTime );
        deadline.setHours ( startTime.getHours() + 48 );
        $("#timer")
          .countdown(deadline, function(event) {
            $(this).text(
              "Time Remaining: " + event.strftime('%H:%M:%S')
            );
          });
      })

      $("#authenticate").on("click", function(event){
        $("#intro").addClass("animated fadeOutUp");
        setTimeout(function(){
          //- $("#dashboard").removeClass("hidden");
          $("#intro").addClass("hidden");
          $("#dashboard").removeClass("hidden");
        }, 2000);
      })

    });
